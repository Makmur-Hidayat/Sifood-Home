<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Home Sifood - Sipora Food</title>
  <style>
    * {
      box-sizing: border-box;
    }
    body {
      margin: 0;
      font-family: sans-serif;
    }
    .search-bar {
      position: sticky;
      top: 0;
      background: white;
      padding: 10px;
      z-index: 1000;
    }
    .grid-container {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      padding: 10px;
    }
    .card {
      border: 1px solid #ccc;
      border-radius: 10px;
      overflow: hidden;
      text-align: center;
      position: relative;
      transition: opacity 0.3s;
    }
    .card.closed {
      opacity: 0.4;
      pointer-events: none;
    }
    .card img {
      width: 100%;
      height: 120px;
      object-fit: cover;
    }
    .card h3 {
      margin: 10px 0 5px;
    }
    .card p {
      margin: 0 0 10px;
      font-size: 0.9em;
    }
    .closed-label {
      position: absolute;
      top: 10px;
      left: 10px;
      background: red;
      color: white;
      padding: 3px 6px;
      font-size: 12px;
      border-radius: 5px;
    }
    .bottom-nav {
      position: sticky;
      bottom: 0;
      display: flex;
      justify-content: space-around;
      background: #f8f8f8;
      padding: 10px 0;
      border-top: 1px solid #ccc;
    }
    .bottom-nav button {
      background: none;
      border: none;
      font-size: 1em;
    }
  </style>
</head>
<body>

  <div class="search-bar">
    <input type="text" id="searchInput" placeholder="Cari makanan/minuman..." style="width: 100%; padding: 10px; font-size: 1em;" />
  </div>

  <div id="warungList" class="grid-container"></div>

  <div class="bottom-nav">
    <button onclick="switchTab('warung')">Warung</button>
    <button onclick="window.location.href='https://makmur-hidayat.github.io/Sifood-Kurir/'">Kurir</button>
    <button onclick="window.location.href='https://makmur-hidayat.github.io/Sifood-Kurir/'">Lainnya</button>
  </div>

  <script>
    const dataWarung = [
      {
        nama: "WARUNG SUTAN",
        gambar: "https://i.ibb.co.com/qSq6chK/Oranye-Merah-Minimalis-Warung-Makan-Business-Card-20250507-083836-0000.jpg",
        jam: "Senin-minggu jam 11:00-21:00",
        tentang: "Makanan Dimasak dulu, Mie Pedas dower topping telur matasapi, Telur dadar, Sosis, Bakso, Minuman dingin minuman hangat Milkshake BOBA",
        link: "https://makmur-hidayat.github.io/Warung-sutan/"
      },
      {
        nama: "RUMAH MAKAN SALERO KITO",
        gambar: "https://i.ibb.co.com/1JtnhBjw/Oranye-Merah-Minimalis-Warung-Makan-Business-Card-20250507-083836-0001.jpg",
        jam: "Senin-Jumat jam 11:00-20:00",
        tentang: "Makanan Cepat saji, Nasi Bungkus Sambal Ayam bakar ayam gulai ayam bumbu ayam goreng ikan bakar ikan gulai ikan goreng Minuman dingin Jus mangga jus alpukat jus Jeruk esteh es teh manis nasi putih",
        link: "https://makmur-hidayat.github.io/RMSalerokito/"
      },
      {
        nama: "DAPOER WAWA",
        gambar: "https://i.ibb.co.com/KccY6t5Y/Properti-Sifood-20250507-215020-0000.jpg",
        jam: "Senin-Sabtu jam 00:00-06:00",
        tentang: "makanan pedas dimasak dulu, ayam geprek, pecel lele, mie goreng telur matasapi telur dadas. Minuman dingin Teh hijau teh hijau susu es blend Beludru, es blend coklat sultan Nasi putih",
        link: "https://makmur-hidayat.github.io/DAPOER-WAWA/"
      },
      {
        nama: "RUMAH MAKAN SALERO ONR",
        gambar: "https://i.ibb.co.com/1JtnhBjw/Oranye-Merah-Minimalis-Warung-Makan-Business-Card-20250507-083836-0001.jpg",
        jam: "Senin-Minggu jam 11:00-21:00",
        tentang: "Makanan Cepat saji, Nasi Bungkus Sambal Ayam bakar ayam gulai ayam bumbu ayam goreng ikan bakar ikan gulai ikan goreng Minuman dingin Jus mangga jus alpukat jus Jeruk esteh es teh manis nasi putih",
        link: "https://makmur-hidayat.github.io/RMSalerokito/"
      }
    ];

    function parseJamOperasional(jamStr) {
      const hariMap = ["Minggu", "Senin", "Selasa", "Rabu", "Kamis", "Jumat", "Sabtu"];
      const hariIni = new Date();
      const hariSekarang = hariMap[hariIni.getDay()];
      const waktuSekarang = hariIni.getHours() * 60 + hariIni.getMinutes();

      const [hariBagian, jamBagian] = jamStr.split(" jam ");
      const [jamBuka, jamTutup] = jamBagian.split("-").map(j => {
        const [h, m] = j.split(":").map(Number);
        return h * 60 + m;
      });

      let hariAktif = [];
      if (hariBagian.includes("-")) {
        const [awal, akhir] = hariBagian.split("-").map(h => h.trim());
        const iAwal = hariMap.indexOf(awal);
        const iAkhir = hariMap.indexOf(akhir);
        if (iAwal <= iAkhir) {
          hariAktif = hariMap.slice(iAwal, iAkhir + 1);
        } else {
          hariAktif = hariMap.slice(iAwal).concat(hariMap.slice(0, iAkhir + 1));
        }
      } else {
        hariAktif = hariBagian.split(",").map(h => h.trim());
      }

      const bukaHariIni = hariAktif.includes(hariSekarang);
      return bukaHariIni && waktuSekarang >= jamBuka && waktuSekarang <= jamTutup;
    }

    function tampilkanWarung(data) {
      const container = document.getElementById("warungList");
      container.innerHTML = "";

      data.forEach(item => {
        const buka = parseJamOperasional(item.jam);
        const card = document.createElement("div");
        card.className = "card" + (buka ? "" : " closed");
        const isi = `
          <img src="${item.gambar}" alt="${item.nama}">
          ${!buka ? `<div class="closed-label">TUTUP</div>` : ""}
          <h3>${item.nama}</h3>
          <p>${item.jam}</p>
        `;
        card.innerHTML = isi;
        if (buka) {
          card.onclick = () => window.location.href = item.link;
        }
        container.appendChild(card);
      });
    }

    document.getElementById("searchInput").addEventListener("input", function() {
      const keyword = this.value.toLowerCase();
      const hasil = dataWarung.filter(w => w.tentang.toLowerCase().includes(keyword));
      tampilkanWarung(hasil);
    });

    function switchTab(tab) {
      if (tab === "warung") tampilkanWarung(dataWarung);
    }

    tampilkanWarung(dataWarung);
    setInterval(() => tampilkanWarung(dataWarung), 60000);
  </script>
</body>
</html>
